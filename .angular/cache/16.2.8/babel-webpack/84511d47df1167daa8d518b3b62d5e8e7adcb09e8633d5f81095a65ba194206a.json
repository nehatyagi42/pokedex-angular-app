{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ViewComponent = class ViewComponent {\n  constructor(route, pokemonService) {\n    this.route = route;\n    this.pokemonService = pokemonService;\n    this.pokemon = null;\n    this.subscriptions = [];\n  }\n  set subscription(subscription) {\n    this.subscriptions.push(subscription);\n  }\n  ngOnInit() {\n    this.subscription = this.route.params.subscribe(params => {\n      if (this.pokemonService.pokemons.length) {\n        this.pokemon = this.pokemonService.pokemons.find(i => i.name === params['name']);\n        if (this.pokemon) {\n          this.getEvolution();\n          return;\n        }\n      }\n      this.subscription = this.pokemonService.get(params['name']).subscribe(response => {\n        this.pokemon = response;\n        this.getEvolution();\n      }, error => console.log('Error Occurred:', error));\n    });\n  }\n  ngOnDestroy() {\n    this.subscriptions.forEach(subscription => subscription ? subscription.unsubscribe() : 0);\n  }\n  getEvolution() {\n    if (!this.pokemon.evolutions || !this.pokemon.evolutions.length) {\n      this.pokemon.evolutions = [];\n      this.subscription = this.pokemonService.getSpecies(this.pokemon.name).subscribe(response => {\n        const id = this.getId(response.evolution_chain.url);\n        this.subscription = this.pokemonService.getEvolution(id).subscribe(response => this.getEvolves(response.chain));\n      });\n    }\n  }\n  getEvolves(chain) {\n    this.pokemon.evolutions.push({\n      id: this.getId(chain.species.url),\n      name: chain.species.name\n    });\n    if (chain.evolves_to.length) {\n      this.getEvolves(chain.evolves_to[0]);\n    }\n  }\n  getType(pokemon) {\n    return this.pokemonService.getType(pokemon);\n  }\n  getId(url) {\n    const splitUrl = url.split('/');\n    return +splitUrl[splitUrl.length - 2];\n  }\n};\nViewComponent = __decorate([Component({\n  selector: 'app-view',\n  templateUrl: './view.component.html',\n  styleUrls: ['./view.component.scss']\n})], ViewComponent);","map":{"version":3,"names":["Component","ViewComponent","constructor","route","pokemonService","pokemon","subscriptions","subscription","push","ngOnInit","params","subscribe","pokemons","length","find","i","name","getEvolution","get","response","error","console","log","ngOnDestroy","forEach","unsubscribe","evolutions","getSpecies","id","getId","evolution_chain","url","getEvolves","chain","species","evolves_to","getType","splitUrl","split","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/ramb0/Desktop/AngularProject/pokedex-angular-app/src/app/components/view/view.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { PokemonService } from 'src/app/services/pokemon.service';\n\n\n@Component({\n  selector: 'app-view',\n  templateUrl: './view.component.html',\n  styleUrls: ['./view.component.scss']\n})\nexport class ViewComponent implements OnInit {\n\n  pokemon: any = null;\n\n  subscriptions: Subscription[] = [];\n\n  constructor(\n    private route: ActivatedRoute,\n    private pokemonService: PokemonService) { }\n\n  set subscription(subscription: Subscription) {\n    this.subscriptions.push(subscription);\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.route.params.subscribe(params => {\n\n      if (this.pokemonService.pokemons.length) {\n        this.pokemon = this.pokemonService.pokemons.find(i => i.name === params['name']);\n        if (this.pokemon) {\n          this.getEvolution();\n          return;\n        }\n      }\n\n      this.subscription = this.pokemonService.get(params['name']).subscribe(response => {\n        this.pokemon = response;\n        this.getEvolution();\n      }, error => console.log('Error Occurred:', error));\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.forEach(subscription => subscription ? subscription.unsubscribe() : 0);\n  }\n\n  getEvolution() {\n    if (!this.pokemon.evolutions || !this.pokemon.evolutions.length) {\n      this.pokemon.evolutions = [];\n      this.subscription = this.pokemonService.getSpecies(this.pokemon.name).subscribe(response => {\n        const id = this.getId(response.evolution_chain.url);\n        this.subscription = this.pokemonService.getEvolution(id).subscribe(response => this.getEvolves(response.chain));\n      });\n    }\n  }\n\n  getEvolves(chain: any) {\n    this.pokemon.evolutions.push({\n      id: this.getId(chain.species.url),\n      name: chain.species.name\n    });\n\n    if (chain.evolves_to.length) {\n      this.getEvolves(chain.evolves_to[0]);\n    }\n  }\n\n  getType(pokemon: any): string {\n    return this.pokemonService.getType(pokemon);\n  }\n\n  getId(url: string): number {\n    const splitUrl = url.split('/')\n    return +splitUrl[splitUrl.length - 2];\n  }\n\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}